{% extends "layout.html" %}

{% block pageTitle %}
Find an assessor | Energy performance of buildings
{% endblock %}

{% set backLink = "/" %}

{% block content %}

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <h1 class="govuk-heading-xl">
      Find an energy assessor
    </h1>
    <p class="govuk-body">
      Find energy assessors in your area.
    </p>

    <div class="postcode-search-form">
      <form action="/find-an-assessor-results" method="post" class="form" onsubmit="return redirect();">
        <fieldset class="govuk-fieldset">
          <div class="govuk-form-group">
            <label class="govuk-label" for="postcode">
              Enter a postcode
            </label>
            <span id="more-detail-hint" class="govuk-hint">
              For example SW1A 2AA
            </span>
            <input name="postcode" id="postcode" class="govuk-input" id="address-postcode" type="text" />
          </div>
          <button class="govuk-button" data-module="govuk-button">Find</button>
        </fieldset>
      </form>
    </div>
  </div>
</div>

<script type="text/javascript">
  function redirect() {
    var postcode = document.getElementById("address-postcode").value;
    var regex = RegExp('[A-Za-z]{1,2}[0-9Rr][0-9A-Za-z]? [0-9][ABD-HJLNP-UW-Zabd-hjlnp-uw-z]{2}');

    if (regex.test(postcode) == false) {
      location.href = "/address_invalid_postcode?var="+postcode;
    } else {
      location.href = "/result?var="+postcode;
    }
    return false;
  }
</script>

{% endblock %}
